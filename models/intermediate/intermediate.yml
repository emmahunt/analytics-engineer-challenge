
version: 2

models:
  - name: int_page_views_joined_to_user
    description: "This intermediate model performs some logic to join the page view table to the users table. This is required because the user id in the page view table does not join directly to the users table, so the link between the pageview user identifier and the user table user_id must be inferred by the timestamp of a corresponding page view in the page views table.\n 
    
    There are a few page views that used as a proxy event for a user being created: any that are categorised in the dim_web_page dimension as being associated with account creation. This is based on an assumption that there are many different landing pages that will trigger a user account being created in the 'backend' user system. When using just a single account page (e.g. '/first-time-visit') as a proxy event for a user account being created, the match rate between page views and users was too low to be useful. So, many different page views are assessed and a match is attempted to the user system based on the timestamp of these events."
    columns:
      - name: user_identifier
        description: "The unique identifier for a user as found in the page views table. This identifier is a 36-character string of alphanumeric characters of UUID / GUID format."
        tests:
          - unique
          - not_null
      - name: user_id
        description: "The user_id from the users table that corresponds to the user_identifier from the page view data set, according to a best attempt at matching based on the timestamp of a page view associated with account creation, and the created_at data in the users table. It is not a certain match, but rather a best guess."
        tests:
          - unique
    