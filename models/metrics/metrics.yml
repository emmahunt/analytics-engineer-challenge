
version: 2

metrics:
  - name: new_users
    label: New Users
    model: ref('dim_user')
    description: "The count of new users - people or organisations who have created an account and submitted payment details for the product."

    calculation_method: count_distinct
    expression: user_id 

    timestamp: created_at
    time_grains: [day, week, month, quarter, year]

    dimensions:
      - user_cohort_week

  - name: lapsed_users
    label: Lapsed Users
    model: ref('dim_user')
    description: "A user is considered lapsed if they have not generated a page view in 7 days."

    calculation_method: count_distinct
    expression: user_identifier

    timestamp: lapsed_date
    time_grains: [day, week, month, quarter, year]

    dimensions:
      - user_identifier
      - user_cohort_week
